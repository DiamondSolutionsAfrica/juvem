<script type='text/javascript'>
    jQuery(document).ready(function () {
        var updateRange,
                elAgeRangeBegin = $('#{{ formMain }}_ageRangeBegin'),
                elAgeRangeEnd = $('#{{ formMain }}_ageRangeEnd'),
                slider = $('.slider-input');

        updateRange = function () {
            var min = parseInt(elAgeRangeBegin.val()),
                    max = parseInt(elAgeRangeEnd.val()),
                    switcher;
            if (min > max) {
                switcher = min;
                min = max;
                max = switcher;
            }
            slider.jRange('setValue', min + ',' + max);
        };

        elAgeRangeBegin.on('change', updateRange);
        elAgeRangeEnd.on('change', updateRange);

        slider.jRange({
            from: {{ constant('AppBundle\\Entity\\NewsletterSubscription::AGE_RANGE_MIN') }},
            to: {{ constant('AppBundle\\Entity\\NewsletterSubscription::AGE_RANGE_MAX') }},
            step: 1,
            scale: [0, 6, 12, 18],
            width: 200,
            format: function (value) {
                if (value == 1) {
                    return '1 Jahr';
                } else {
                    return value + ' Jahre';
                }
            },
            onstatechange: function (value) {
                value = value.split(',');
                elAgeRangeBegin.val(value[0]);
                elAgeRangeEnd.val(value[1]);
            },
            snap: true,
            showLabels: true,
            showScale: true,
            isRange: true
        });

        $('#preselectNone').on('click', function () {
            $('#{{ formMain }}_isEnabled').prop("checked", false);
            $("#{{ formMain }}_subscribedEvents option:selected").prop("selected", false);
        });
        $('#preselectAll').on('click', function () {
            elAgeRangeBegin.val({{ constant('AppBundle\\Entity\\NewsletterSubscription::AGE_RANGE_MIN') }});
            elAgeRangeEnd.val({{ constant('AppBundle\\Entity\\NewsletterSubscription::AGE_RANGE_MAX') }});
            slider.jRange('setValue', '0,18');


            $('#{{ formMain }}_isEnabled').prop("checked", true);
            $('#{{ formMain }}_useAging').prop("checked", false);

            $("#{{ formMain }}_subscribedEvents option:selected").prop("selected", false);
        });
    });
</script>